<div ng-controller="MessagesController as vm">
    <!-- START: FRAME -->
    <div class="content-frame">
        <!-- START: FRAME-TOP -->
        <div class="content-frame-top">
            <div class="page-title">
                <h2><span class="fa fa-comments"></span> Messages <small ng-if="globals.user">Welcome, {{globals.user.username}}</small></h2>
            </div>
            <div class="pull-right">
                <button class="btn btn-danger"><span class="fa fa-book"></span> Contacts</button>
                <button class="btn btn-default content-frame-right-toggle"><span class="fa fa-bars"></span></button>
            </div>
        </div>
        <!-- END: FRAME-TOP -->
        <!-- START: FRAME-RIGHT -->
        <div class="content-frame-right">
            <div class="list-group list-group-contacts list-group-messages border-bottom push-down-10"
            ng-repeat="conversation in vm.getAllConversations(globals.user)">
                <a href="#" class="list-group-item list-group-item-message"
                ng-class="{'status-read': conversation.read, 'status-unread': !conversation.read}">
                    <div class="list-group-status"
                    ng-class="{'status-online': vm.isUserOnline(conversation.author.username), 'status-offline': !vm.isUserOnline(conversation.author.username)}"></div>
                    <img src="{{vm.getUserProfilePicture(conversation.author.username)}}" class="pull-left" alt="{{conversation.author.username}}">
                    <div class="contacts-title">{{conversation.author.firstname}} {{conversation.author.lastname}}
                        <span ng-show="vm.getNumberOfUnreadMessagesInConversation(conversation.author.username) > 0" class="label label-danger">
                            {{vm.getNumberOfUnreadMessagesInConversation(conversation.author.username)}}
                        </span>
                    </div>
                    <p>{{vm.getMessageExcerpt(conversation.messages[0], (conversation.read)?30:28, true)}}</p>
                </a>
            </div>
        </div>
        <!-- END: FRAME-RIGHT -->
        <!-- START: FRAME-BODY -->
        <div class="content-frame-body content-frame-body-left">
            <div class="messages messages-img">
                <div class="item in">
                    <div class="image">
                        <img src="assets/images/users/user2.jpg" alt="John Doe">
                    </div>
                    <div class="text">
                        <div class="heading">
                            <a href="#">John Doe</a>
                            <span class="date">08:33</span>
                        </div>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed facilisis suscipit eros vitae iaculis.
                    </div>
                </div>
                <div class="item">
                    <div class="image">
                        <img src="assets/images/users/user2.jpg" alt="Dmitry Ivaniuk">
                    </div>
                    <div class="text">
                        <div class="heading">
                            <a href="#">Dmitry Ivaniuk</a>
                            <span class="date">08:39</span>
                        </div>
                        Integer et ipsum vitae urna mattis dictum. Sed eu sollicitudin nibh, in luctus velit.
                    </div>
                </div>
                <div class="item">
                    <div class="image">
                        <img src="assets/images/users/user2.jpg" alt="Dmitry Ivaniuk">
                    </div>
                    <div class="text">
                        <div class="heading">
                            <a href="#">Dmitry Ivaniuk</a>
                            <span class="date">08:42</span>
                        </div>
                        In dapibus ex ut nisl laoreet aliquam. Donec in mollis leo. Aenean nec suscipit neque, non iaculis justo. Quisque eget odio efficitur, porta risus vitae, sagittis neque.
                    </div>
                </div>
                <div class="item in">
                    <div class="image">
                        <img src="assets/images/users/user2.jpg" alt="John Doe">
                    </div>
                    <div class="text">
                        <div class="heading">
                            <a href="#">John Doe</a>
                            <span class="date">08:58</span>
                        </div>
                        Curabitur et euismod urna?
                    </div>
                </div>
                <div class="item">
                    <div class="image">
                        <img src="assets/images/users/user2.jpg" alt="Dmitry Ivaniuk">
                    </div>
                    <div class="text">
                        <div class="heading">
                            <a href="#">Dmitry Ivaniuk</a>
                            <span class="date">09:11</span>
                        </div>
                        Fusce ultricies erat quis massa interdum, eu elementum urna iaculis
                    </div>
                </div>
                <div class="item in">
                    <div class="image">
                        <img src="assets/images/users/user2.jpg" alt="John Doe">
                    </div>
                    <div class="text">
                        <div class="heading">
                            <a href="#">John Doe</a>
                            <span class="date">09:22</span>
                        </div>
                        Vestibulum cursus ipsum ut dolor vulputate dapibus. Donec elementum est vel vulputate malesuada?
                    </div>
                </div>
            </div>

            <div class="panel panel-default push-up-10">
                <div class="panel-body panel-body-search">
                    <div class="input-group">
                        <div class="input-group-btn">
                            <button class="btn btn-default"><span class="fa fa-camera"></span></button>
                            <button class="btn btn-default"><span class="fa fa-chain"></span></button>
                        </div>
                        <input type="text" class="form-control" placeholder="Your message..."/>
                        <div class="input-group-btn">
                            <button class="btn btn-default">Send</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END: FRAME-BODY -->
    </div>
    <!-- END: FRAME -->
</div>
